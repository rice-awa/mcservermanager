# Minecraft Java 后台管理 WebUI 产品需求文档

## 项目概述

本项目旨在构建一个现代化、功能完备的 Minecraft Java 版服务器后台管理 Web 界面。通过该系统，服务器管理员可以在浏览器中远程管理 Minecraft 服务器，实现对服务器状态的全方位监控和实时控制。项目采用 React 与 Vite 技术栈进行前端开发，界面设计遵循 shadcn/ui 风格，强调简洁美观与易用性的统一。

远程控制台接管功能是本系统的核心特性之一，它允许管理员通过 Web 界面直接与 Minecraft 服务端进行交互，发送指令并实时查看执行结果。这一功能极大地方便了服务器管理，特别是在管理员无法直接访问服务器终端环境的场景下。此外，系统还提供了丰富的服务器状态监控功能，包括在线玩家列表、服务器 TPS（每秒方块刻）、CPU 占用率、内存使用情况等关键指标的实时展示，帮助管理员及时发现并处理服务器性能问题。

在技术架构方面，前端采用 React 生态系统配合 Vite 构建工具，确保开发效率与运行性能的双重保障。后端需要搭建一个中间服务，负责 WebSocket 实时通信协议的维护以及与 Minecraft RCON 接口的连接。整体架构强调模块化设计，便于后续功能扩展和维护升级。

---

## 目标用户

本产品主要面向以下两类用户群体，每类用户有着不同的使用场景和需求特征。

第一类是 Minecraft 私人服务器管理员。这类用户通常运营小型至中型的私人服务器，可能是朋友之间的联机服务器、小型社区服务器或者是用于测试和开发的临时服务器。他们的技术背景参差不齐，有的具有一定编程和服务器管理经验，有的则完全是普通玩家。對於這類用戶而言，簡潔直觀的操作界面尤為重要，因為他們可能不熟悉複雜的服務器管理命令和概念。他們最關注的功能包括快速的服務器狀態查看、便捷的指令發送、以及對服務器資源佔用的基本了解。界面的美觀程度也是影響其使用體驗的重要因素，畢竟這類用戶往往重視使用感受而非功能的专业性。

第二类是 Minecraft 商业服务器运营者。这类用户运营的是面向公众的商业服务器，可能涉及付费玩家服务、服务器出租业务或者是大型社区平台。他们的技术能力通常较强，对服务器性能监控、批量管理、安全控制等方面有更高的要求。这类用户更关注系统的稳定性、安全性以及是否支持多服务器统一管理。他们可能需要详细的服务器统计数据、历史趋势分析、以及更精细的权限控制功能。在设计上，他们更倾向于功能密集型而非极简风格的界面布局。

---

## 功能需求

### 3.1 服务器连接管理

服务器连接管理模块是整个系统的基础，负责建立和管理 Web 界面与 Minecraft 服务器之间的通信链路。该模块需要支持多种连接方式以适应不同的部署环境和使用场景。

首先是 RCON 连接方式的实现。RCON（Remote Console）是 Minecraft 服务端内置的远程管理协议，允许客户端通过网络向服务器发送命令并接收执行结果。这种方式配置简单，适用于大多数 Minecraft 服务器场景。系统需要支持配置 RCON 主机地址、端口号以及认证密码等连接参数，并在界面上提供直观的连接状态指示。当连接出现异常时，系统应能够识别并向用户反馈具体的错误原因，如密码错误、端口不可达或者是服务器未启用 RCON 等常见问题。

其次是 WebSocket 直连方式的考虑。虽然 RCON 是 Minecraft 官方支持的协议，但在某些网络环境下可能受到限制。部分用户可能需要通过 WebSocket 进行中转连接，这就要求后端服务具备 WebSocket 服务器能力，能够维护与前端的长连接，同时通过 RCON 与 Minecraft 服务器进行通信。这种架构虽然增加了一定的复杂性，但提供了更好的网络穿透能力和安全性控制。

连接配置管理功能需要提供便捷的保存和加载机制。用户应能够保存多组服务器连接配置，方便在多个服务器之间快速切换。配置信息应本地加密存储，特别是密码等敏感信息需要采取适当的保护措施。此外，系统应支持配置导入导出功能，便于用户备份和迁移配置。

### 3.2 实时控制台模块

实时控制台是本系统的核心交互界面，模拟传统终端的交互体验，同时利用 Web 技术提供更丰富的展示能力。该模块需要实现指令输入、执行结果显示、历史命令记录等基础功能。

指令输入区域应提供类似终端的命令行交互体验。当用户输入指令时，系统应支持自动补全功能，根据已知的 Minecraft 指令提供候选建议，这对于不熟悉完整指令格式的用户特别有帮助。输入框应能够识别并高亮显示特殊格式，如玩家名称、坐标数值等，提高命令的可读性。指令历史功能允许用户通过上下箭头键快速访问之前执行过的命令，提升操作效率。

执行结果显示区域需要清晰地区分不同类型的信息。系统消息（如连接状态、错误提示）应使用与用户命令不同的视觉样式加以区分。聊天信息、广播消息等也应采用适当的颜色编码，便于用户快速识别信息类型。输出内容应支持滚动和自动定位，当有新的输出时，界面应自动滚动到最新内容，同时允许用户暂停自动滚动以查看历史记录。

实时性是该模块的关键要求。所有来自服务器的响应都应通过 WebSocket 实时推送到前端，延迟应控制在秒级以内。控制台界面的更新不应需要用户手动刷新，整个交互过程应保持流畅自然的使用体验。

### 3.3 服务器状态监控

服务器状态监控模块提供服务器运行状态的全面可视化展示，帮助管理员了解服务器的当前状况和性能表现。这些监控数据应以仪表盘的形式组织，直观呈现关键指标。

在线玩家列表功能展示当前连接到服务器的玩家信息。除了基本的玩家名称显示外，还应包括玩家的在线时长、当前坐标位置（如果服务器支持获取）、延迟（Ping 值）等信息。列表应支持排序和搜索功能，便于在玩家较多时快速定位特定玩家。点击玩家名称应提供快捷操作菜单，支持发送私信、执行封禁等常见管理操作。玩家上线和下线事件应有实时通知机制，让管理员能够及时掌握玩家动态。

TPS（Ticks Per Second，每秒方块刻）监控是评估服务器性能的核心指标。Minecraft 服务器的标准运行频率是每秒 20 TPS，低于这个值意味着服务器出现了性能问题。系统应同时展示当前的 TPS 值以及最近一段时间内的变化趋势图。当 TPS 低于安全阈值（如 18 TPS）时，界面应以醒目的方式发出警告，提醒管理员关注服务器性能状况。

CPU 和内存资源监控对于服务器运维至关重要。CPU 占用率展示了服务器进程对处理器资源的使用情况，高 CPU 占用可能意味着存在复杂的红石机械、大量实体或者是插件问题。内存使用情况包括已分配内存、已使用内存以及可用内存等信息，内存不足是服务器崩溃的常见原因。系统应提供这些指标的历史记录图表，支持查看小时级、日级的资源使用趋势。

服务器基本信息的展示包括服务端版本、已加载区块数、当前游戏规则设置、已注册命令数量等。这些信息可以帮助管理员快速了解服务器的当前状态和环境配置。

### 3.4 命令执行管理

除了交互式控制台外，系统还应提供结构化的命令执行管理功能，满足日常运维场景的需求。

快捷命令面板预置了一系列常用管理命令，用户可以通过点击按钮快速执行，无需手动输入完整的命令格式。这些快捷命令应支持自定义配置，允许管理员添加适合自己服务器特点的常用指令。命令执行后应有明确的结果反馈，无论是成功提示还是错误信息。

计划任务功能允许管理员设置命令的定时执行。例如，可以配置每天凌晨自动备份数据、定期清理过期物品或者是定时发送公告消息。计划任务应支持灵活的周期设置，包括定时执行、间隔执行、以及Cron表达式等多种配置方式。每个计划任务应提供执行历史记录，便于追溯和分析。

批量执行功能支持同时向多个服务器发送相同命令，适用于多服务器集群的管理场景。系统应展示每个服务器的执行状态和返回结果，并提供汇总视图。

### 3.5 日志与历史记录

完善的日志记录功能是服务器管理的重要组成部分，有助于问题排查、审计追溯和行为分析。

控制台日志应持久化保存，支持按时间范围搜索和过滤。用户应能够导出日志为标准格式文件，便于离线分析或存档。日志应包含时间戳、执行用户（如果支持多用户）、执行内容、执行结果等完整信息。对于敏感操作（如封禁玩家、管理员权限变更等），日志应有特殊标记以便于快速识别。

系统操作日志记录用户在管理界面中的各类操作，如连接服务器、修改配置、创建计划任务等。这些日志与控制台日志相互补充，共同构成完整的操作审计链条。

### 5.6 用户权限管理

对于需要多人协作管理服务器的场景，系统应提供基本的用户权限控制能力。

用户账号管理功能允许创建多个管理员账户，并设置各自的访问权限。可以配置的权限包括控制台访问、命令执行、配置修改、日志查看等不同级别。权限设置应遵循最小权限原则，普通管理员不应拥有超出其职责范围的权限。

操作审计功能记录每个用户的关键操作，在发生问题时可以追溯到具体责任人。用户登录登出也应纳入日志记录范围。

---

## 非功能需求

### 6.1 性能要求

系统的性能表现直接影响用户体验，需要在设计和实现过程中予以充分重视。

前端页面加载时间应控制在合理范围内。首次访问时的完整加载时间不超过三秒，后续访问利用缓存机制应能实现即时加载。页面切换和交互响应应保持流畅，界面操作到视觉反馈的延迟不超过一百毫秒。

实时数据更新应保持低延迟。从 Minecraft 服务器产生事件到前端展示的时间间隔应控制在两秒以内，对于 TPS、CPU 占用等周期性指标，可以接受较短时间的数据采集和推送间隔。

系统在正常负载下应保持稳定的资源占用。前端应用在浏览器中的内存占用应控制在合理范围，避免出现内存泄漏导致的性能退化。多个服务器连接场景下，系统应能够有效管理连接资源。

### 6.2 可靠性要求

系统需要具备足够的稳定性，确保在各种情况下都能可靠运行。

网络波动是远程管理场景中的常见问题。系统应具备自动重连机制，在网络恢复后能够自动恢复与服务器的连接。连接中断时应及时通知用户，并提供手动重连的操作入口。未保存的数据应有保护机制，避免因意外断连而丢失。

后端服务需要具备基本的容错能力。对于可能的异常情况（如后端服务重启、Minecraft 服务器临时无响应等），系统应能够优雅处理，而不是直接崩溃或显示难以理解的技术错误信息。

### 6.3 安全要求

系统涉及服务器管理权限，安全设计是不可忽视的重要方面。

认证与授权是第一道防线。所有管理操作都应经过身份验证，系统应支持安全的登录机制。敏感操作（如删除数据、执行危险命令）应要求额外的确认步骤。

传输安全要求所有网络通信都应采用加密传输。在生产环境中，系统应强制使用 HTTPS 协议，防止通信内容被窃听或篡改。

数据安全要求敏感信息（如 RCON 密码、用户密码等）应进行适当加密存储。系统应具备安全的数据清理机制，当用户删除连接配置或账户时，相关敏感数据应被彻底清除。

### 6.4 兼容性要求

前端应用应能够在主流浏览器和操作系统上正常运行。

桌面浏览器方面，系统应支持 Chrome、Firefox、Edge、Safari 等主流浏览器的最新两个主要版本。移动浏览器可以作为辅助支持，但不作为主要优化目标。

屏幕适配方面，界面应能够在不同分辨率下正确显示。管理员可能使用各种尺寸的设备，从笔记本电脑到台式机显示器，界面布局应能够自适应这些变化。

---

## 技术架构设计

### 7.1 前端技术栈

前端采用 React 生态系统进行开发，配合 Vite 构建工具实现高效的开发和构建流程。

React 作为用户界面库，提供了组件化开发模式和声明式的编程范式，有助于构建可维护、可复用的界面组件。React 的虚拟 DOM 机制和高效的更新算法确保了界面的响应性能。

Vite 作为构建工具，提供了快速的开发服务器启动速度、即时热模块替换（HMR）能力，以及优化后的生产构建流程。相比传统的 Webpack 构建方案，Vite 在开发体验上有显著优势。

UI 组件库选择 shadcn/ui，这是一个基于 Tailwind CSS 的高质量组件库，提供了现代化、美观的基础组件。shadcn/ui 的特点是不作为独立包分发，而是提供组件源码供开发者按需使用和定制，这使得样式定制和功能扩展都非常灵活。

状态管理方面，可以根据实际需求选择合适的方案。对于中小型项目，React 内置的 Context API 和 useReducer 组合可能已经足够。对于更复杂的场景，可以考虑使用 Zustand 或 Jotai 等轻量级状态管理库。

实时通信采用 WebSocket 协议，这是实现双向实时通信的最佳选择。前端可以使用原生 WebSocket API，或者使用 Socket.IO 客户端库（如果后端也采用 Socket.IO）。WebSocket 连接需要在应用层面处理断线重连、心跳保活等逻辑。

图表展示方面，对于 TPS 趋势图、CPU 内存历史记录等数据可视化需求，可以选择 Recharts 或 Chart.js 等成熟的图表库。这些库提供了丰富的图表类型和配置选项，能够满足监控数据的展示需求。

### 7.2 后端技术栈

后端服务作为 Web 前端与 Minecraft 服务器之间的桥梁，需要处理协议转换、连接管理、业务逻辑等职责。

运行时环境推荐 Node.js，它与前端技术栈统一，减少技术栈的复杂性。Node.js 的事件驱动模型特别适合处理 WebSocket 连接这样的 I/O 密集型任务。

WebSocket 服务可以使用 ws 库（原生 WebSocket 实现）或 Socket.IO（更高级的抽象，提供房间、广播等特性）。Socket.IO 提供了更好的浏览器兼容性和更丰富的功能，但在某些场景下可能显得过于重量级。

与 Minecraft 服务器的通信通过 RCON 协议实现。Node.js 生态中有 rcon-client 等现成的库可以简化 RCON 通信的开发工作。如果需要实现更底层的控制，也可以直接实现 RCON 协议。

### 7.3 系统架构图

系统整体采用前后端分离架构，架构设计如下：

```
┌─────────────────────────────────────────────────────────────┐
│                        客户端层                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │              Web 浏览器（React + Vite）                 │  │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ │  │
│  │  │ 控制台   │ │ 仪表盘   │ │ 玩家管理 │ │ 设置面板 │ │  │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘ │  │
│  └───────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
                              │
                              │ HTTPS / WebSocket
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        服务层                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │              Node.js 后端服务                          │  │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ │  │
│  │  │ WebSocket│ │ RCON 客户端 │ │ 认证服务 │ │ 日志服务 │ │  │
│  │  │   服务   │ │    管理   │ │         │ │         │ │  │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘ │  │
│  └───────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
                              │
                              │ RCON 协议
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                       Minecraft 服务器层                     │
│  ┌───────────────────────────────────────────────────────┐  │
│  │              Minecraft Java Edition Server            │  │
│  │          （开启 RCON 功能监听指定端口）                  │  │
│  └───────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

该架构清晰划分了各层职责：客户端层负责用户交互和数据展示，服务层负责业务逻辑和协议转换，Minecraft 服务器层负责实际的游戏逻辑和数据存储。各层之间通过标准化协议进行通信，便于独立开发、测试和部署。

---

## 界面设计规范

### 8.1 设计原则

界面设计遵循 shadcn/ui 所倡导的设计理念，强调简洁、一致和可用性。

简洁是界面设计的首要原则。界面应去除不必要的视觉元素，突出核心功能入口。信息层级通过适当的留白、色彩对比和排版来表达，而非依赖复杂的装饰元素。每个页面应有明确的视觉焦点，引导用户的注意力到最重要的操作和信息上。

一致性确保用户在应用的不同部分能够获得相似的体验。相似的功能应采用相似的交互模式和视觉样式，这降低了用户的学习成本。统一的组件库使用是保证一致性的基础，同时还需要建立应用层面的设计规范，指导组件的具体应用方式。

可用性要求界面能够高效地支持用户完成任务。常用操作应易于发现和执行，复杂流程应有清晰的引导。错误状态应有明确的提示，并提供修正建议。系统应包容用户的误操作，提供撤销或回退的机制。

### 8.2 色彩系统

主色调采用 shadcn/ui 默认的 Zinc 色系，以不同深浅的灰色为主，配合精选的强调色来表达不同的语义。

基础色板包括从近白（#ffffff）到近黑（#18181b）的十个灰度等级。这些颜色应用于背景、文字、边框等基础视觉元素。界面背景采用接近白色的浅灰色，内容区域使用纯白或略深的灰色，形成自然的层次感。

语义颜色包括成功（绿色系）、警告（黄色系）、错误（红色系）、信息（蓝色系）四类。这些颜色应用于状态指示、提示消息、按钮等需要传达特定语义的元素。语义颜色的使用应保持克制，避免过度使用导致界面显得杂乱。

暗色模式支持是现代 Web 应用的标配功能。系统应提供跟随系统设置自动切换的主题模式，同时也允许用户手动选择浅色或暗色主题。暗色模式下的色彩需要相应调整，确保对比度和可读性。

### 8.3 组件设计

按钮组件是界面中最常用的交互元素。shadcn/ui 提供了多种按钮变体，包括主要按钮（Primary）、次要按钮（Secondary）、-outline 按钮、ghost 按钮等，分别适用于不同的场景。主要按钮用于核心操作，次要按钮用于辅助操作，outline 按钮用于需要明显但不突出的操作。按钮应具有明确的点击反馈，包括悬停状态和点击状态的可视变化。

卡片组件用于组织和展示相关信息的容器。仪表盘上的统计数值、控制台输出区域、玩家信息卡片等都可以使用卡片组件来实现。卡片应有适度的阴影和圆角，营造现代感的视觉效果。

输入组件包括文本输入框、数字输入框、密码输入框等。输入框应具有清晰的标签、占位提示和验证状态反馈。密码输入框应提供显示/隐藏密码的切换功能。

表格组件用于展示列表数据，如玩家列表、日志记录等。表格应支持排序、搜索和分页功能，提升大数据量下的浏览效率。表头应具有视觉区分，行间应有适当的间距，确保可读性。

模态框用于需要用户确认的操作或者是需要集中注意力的编辑场景。模态框应有遮罩层覆盖背景内容，焦点应自动定位到模态框内部，支持 ESC 键关闭和点击遮罩关闭。

### 8.4 页面布局

整体布局采用常见的侧边栏加主内容区结构。侧边栏固定在左侧，承载主要的导航功能；主内容区占据右侧剩余空间，展示具体页面内容。

侧边栏包含应用 logo、导航菜单和底部的用户设置入口。导航菜单采用图标加文字的组合形式，当前激活的菜单项应有明显的视觉标识。侧边栏在移动端应能够折叠为更紧凑的形式，或者是切换到底部导航模式。

主内容区顶部可以放置页面标题、面包屑导航和页面级别的操作按钮。内容区域根据具体页面的需求进行组织。控制台页面应充分利用垂直空间，将输入区域固定在底部，输出区域占据主要位置。仪表盘页面采用网格布局组织各个统计卡片。

---

## API 设计

### 9.1 WebSocket 消息格式

WebSocket 作为主要的实时通信通道，所有客户端与服务器之间的消息都应遵循统一的格式规范。

每条消息都应包含 type 字段标识消息类型，以及可选的 payload 字段承载具体数据。消息的 JSON 结构设计如下：

```json
{
  "type": "message_type",
  "payload": { /* 具体数据 */ }
}
```

消息类型包括：连接相关（connect、disconnect、error）、命令相关（executeCommand、commandOutput）、监控相关（statsUpdate、playerUpdate）、系统相关（ping、pong）等。每种消息类型定义了具体的 payload 数据结构。

### 9.2 REST API 设计

对于不需要实时性的操作，可以采用 REST API 完成，如配置管理、日志查询等。

认证相关接口包括用户注册、登录、登出和会话验证。请求和响应都应遵循标准的 REST 风格，使用适当的 HTTP 状态码表达操作结果。

配置管理接口提供连接配置的增删改查功能。敏感配置（如密码）应在存储时加密，在 API 响应中应被屏蔽或移除。

日志查询接口支持按条件筛选和分页获取日志记录。接口参数应支持时间范围筛选、关键字搜索、消息类型过滤等功能。

---

## 项目里程碑

项目开发分为四个主要阶段，每个阶段有明确的目标和交付物。

第一阶段是项目基础架构搭建。该阶段的主要任务是完成前端项目的初始化搭建，包括 Vite 项目的创建、TypeScript 配置、路由设置、状态管理方案确定以及 UI 组件库的集成。同时完成后端项目的基本框架搭建，实现基础的 WebSocket 服务器功能。该阶段的交付物是可运行的前后端基础项目框架。

第二阶段是核心功能开发。该阶段实现系统的主要功能模块，包括服务器连接管理、实时控制台界面、服务器状态监控（玩家列表、TPS、CPU、内存）、命令执行功能等。这个阶段结束时，系统应能够完成基本的服务器远程管理任务。

第三阶段是完善与优化。该阶段侧重于功能的完善和用户体验的优化，包括日志记录与历史查询、用户权限管理、快捷命令面板、计划任务功能等高级特性。同时进行性能优化和安全加固，确保系统的稳定可靠。

第四阶段是测试与发布。该阶段进行全面的测试工作，包括功能测试、性能测试、安全测试和兼容性测试。修复测试中发现的问题，完成文档编写，准备正式发布。

---

## 风险识别与应对

在项目开发过程中，需要关注以下潜在风险并做好应对准备。

技术风险方面，WebSocket 连接在网络不稳定环境下的表现需要重点关注。应对策略包括实现可靠的心跳保活机制、自动重连逻辑和断线提示。同时需要验证 RCON 协议在不同 Minecraft 服务端版本上的兼容性。

范围风险方面，功能需求在开发过程中可能发生变化。应对策略是采用迭代开发模式，优先完成核心功能，根据实际反馈调整后续功能的优先级和实现方式。

时间风险方面，项目的开发时间可能受到各种因素影响。应对策略是在计划中预留适当的缓冲时间，同时对功能进行优先级排序，确保核心功能在期限内完成。

---

## 附录

### 术语表

| 术语 | 说明 |
|------|------|
| RCON | Remote Console，Minecraft 服务端的远程管理协议 |
| TPS | Ticks Per Second，每秒方块刻，衡量服务器性能的指标 |
| WebSocket | 一种网络通信协议，支持双向实时通信 |
| shadcn/ui | 基于 Tailwind CSS 的 UI 组件库 |
| Vite | 前端构建工具 |
| HMR | Hot Module Replacement，热模块替换 |

### 参考资料

- Minecraft Server RCON Protocol 规范
- shadcn/ui 官方文档
- Vite 官方文档
- React 官方文档
