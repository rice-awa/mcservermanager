# åŠŸèƒ½æµ‹è¯•è®¾ç½®æŒ‡å—

## é—®é¢˜ç°è±¡

è¿è¡Œ `npm run test:functional` æ—¶çœ‹åˆ°ï¼š
```
âœ— æµ‹è¯• RCON è¿æ¥
  æ¶ˆæ¯: RCON è¿æ¥å¼‚å¸¸: æœªæ‰¾åˆ°å¯ç”¨çš„æœåŠ¡å™¨é…ç½®ï¼Œè¯·å…ˆåˆ›å»ºé…ç½®
```

è¿™æ˜¯**æ­£å¸¸çš„** - æµ‹è¯•éœ€è¦å…ˆé…ç½® Minecraft æœåŠ¡å™¨ã€‚

## å®Œæ•´çš„æµ‹è¯•è®¾ç½®æ­¥éª¤

### æ­¥éª¤ 1: å¯åŠ¨åç«¯æœåŠ¡

æ‰“å¼€ä¸€ä¸ªæ–°çš„ PowerShell çª—å£ï¼š

```powershell
cd E:\Python_JavaScript\mcservermanager\backend
npm run dev
```

ç­‰å¾…çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼š
```
2026-02-03 09:44:00.000 INFO  [App] æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
2026-02-03 09:44:00.000 INFO  [App] HTTP: http://0.0.0.0:3001
2026-02-03 09:44:00.000 INFO  [App] WebSocket: ws://0.0.0.0:3001
```

### æ­¥éª¤ 2: é…ç½® Minecraft æœåŠ¡å™¨

#### 2.1 å¯ç”¨ RCON

ç¼–è¾‘ä½ çš„ Minecraft æœåŠ¡å™¨çš„ `server.properties` æ–‡ä»¶ï¼š

```properties
enable-rcon=true
rcon.port=25575
rcon.password=your-secure-password
```

é‡å¯ Minecraft æœåŠ¡å™¨ã€‚

#### 2.2 å¯é€‰ï¼šå®‰è£… Spark Mod

å¦‚æœä½ æƒ³è¿è¡Œå®Œæ•´çš„ä»ªè¡¨ç›˜æµ‹è¯•ï¼Œéœ€è¦å®‰è£… Spark Modï¼š

1. è®¿é—® https://spark.lucko.me/download
2. ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ Spark jar
3. æ”¾å…¥æœåŠ¡å™¨çš„ `mods` æˆ– `plugins` ç›®å½•
4. é‡å¯æœåŠ¡å™¨

Spark å°†åœ¨ http://localhost:8080 è¿è¡Œï¼ˆç«¯å£å¯é…ç½®ï¼‰

### æ­¥éª¤ 3: æ·»åŠ æœåŠ¡å™¨é…ç½®

ä½¿ç”¨ PowerShell æ·»åŠ æœåŠ¡å™¨é…ç½®åˆ°åç«¯ï¼š

```powershell
# è®¾ç½®å˜é‡
$apiUrl = "http://localhost:3001/api/configs"
$configName = "æµ‹è¯•æœåŠ¡å™¨"
$host = "127.0.0.1"  # å¦‚æœ MC æœåŠ¡å™¨åœ¨æœ¬æœº
$rconPort = 25575
$rconPassword = "your-secure-password"
$sparkUrl = "http://127.0.0.1:8080"  # å¯é€‰

# å‘é€è¯·æ±‚
$body = @{
    name = $configName
    host = $host
    port = $rconPort
    password = $rconPassword
    timeout = 5000
    sparkApiUrl = $sparkUrl
} | ConvertTo-Json

Invoke-WebRequest -Uri $apiUrl `
  -Method Post `
  -ContentType "application/json" `
  -Body $body `
  -UseBasicParsing
```

**æˆ–è€…ä½¿ç”¨ curlï¼š**

```powershell
curl -X POST http://localhost:3001/api/configs `
  -H "Content-Type: application/json" `
  -d '{
    "name": "æµ‹è¯•æœåŠ¡å™¨",
    "host": "127.0.0.1",
    "port": 25575,
    "password": "your-secure-password",
    "timeout": 5000,
    "sparkApiUrl": "http://127.0.0.1:8080"
  }' -UseBasicParsing
```

### æ­¥éª¤ 4: éªŒè¯é…ç½®

æ£€æŸ¥é…ç½®æ˜¯å¦å·²æ·»åŠ ï¼š

```powershell
curl http://localhost:3001/api/configs -UseBasicParsing
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„è¾“å‡ºï¼š
```json
{
  "success": true,
  "data": [
    {
      "id": "xxx",
      "name": "æµ‹è¯•æœåŠ¡å™¨",
      "host": "127.0.0.1",
      "port": 25575,
      "password": "your-secure-password",
      "timeout": 5000,
      "sparkApiUrl": "http://127.0.0.1:8080"
    }
  ]
}
```

### æ­¥éª¤ 5: è¿è¡Œæµ‹è¯•

åœ¨ **æ–°çš„ PowerShell çª—å£** ä¸­è¿è¡Œæµ‹è¯•ï¼ˆä¿æŒåç«¯è¿è¡Œï¼‰ï¼š

```powershell
cd E:\Python_JavaScript\mcservermanager\backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:functional

# æˆ–è¿è¡Œå•ä¸ªæµ‹è¯•
npm run test:connection
npm run test:console
npm run test:dashboard
```

## é¢„æœŸçš„æµ‹è¯•ç»“æœ

### è¿æ¥æµ‹è¯•æˆåŠŸçš„è¾“å‡º

```
========================================

ğŸ“‹ è¿æ¥æµ‹è¯• ç»“æœ

========================================

âœ“ æµ‹è¯• RCON è¿æ¥
  æ¶ˆæ¯: RCON è¿æ¥æˆåŠŸ (å»¶è¿Ÿ: 45ms)
  è€—æ—¶: 234ms

âœ“ æµ‹è¯• WebSocket è¿æ¥
  æ¶ˆæ¯: WebSocket è¿æ¥æˆåŠŸ (Socket ID: abc123...)
  è€—æ—¶: 156ms

âœ“ æµ‹è¯•æ–­çº¿é‡è¿
  æ¶ˆæ¯: æˆåŠŸè¿›è¡Œæ–­çº¿é‡è¿
  è€—æ—¶: 1234ms

âœ“ æµ‹è¯• MC æœåŠ¡å™¨è¿æ¥
  æ¶ˆæ¯: MC æœåŠ¡å™¨çŠ¶æ€: connected
  è€—æ—¶: 345ms

========================================
æ€»è®¡: 4 ä¸ªæµ‹è¯•
é€šè¿‡: 4 ä¸ª
å¤±è´¥: 0 ä¸ª
æ€»è€—æ—¶: 1969ms
========================================
```

### å®Œæ•´æµ‹è¯•é€šè¿‡çš„æœ€ç»ˆè¾“å‡º

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         æµ‹è¯•æ€»ä½“ç»“æœæ‘˜è¦              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ è¿æ¥æµ‹è¯•
  é€šè¿‡: 4/4
  è€—æ—¶: 1969ms

âœ“ æ§åˆ¶å°æµ‹è¯•
  é€šè¿‡: 3/3
  è€—æ—¶: 3635ms

âœ“ ä»ªè¡¨ç›˜æµ‹è¯•
  é€šè¿‡: 4/4
  è€—æ—¶: 4391ms

========================================
æ€»è®¡: 11 ä¸ªæµ‹è¯•
é€šè¿‡: 11 ä¸ª
å¤±è´¥: 0 ä¸ª
æ€»è€—æ—¶: 9995ms
========================================

ğŸ‰ æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼
```

## å¿«é€Ÿæµ‹è¯•è„šæœ¬

ä½¿ç”¨ PowerShell è„šæœ¬ç®€åŒ–æµ‹è¯•æµç¨‹ï¼š

```powershell
cd E:\Python_JavaScript\mcservermanager\backend
.\test-quick.ps1
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ“ æ£€æŸ¥ Node.js
2. âœ“ æ£€æŸ¥åç«¯æœåŠ¡
3. âœ“ æ£€æŸ¥æœåŠ¡å™¨é…ç½®
4. âœ“ æç¤ºé€‰æ‹©æµ‹è¯•ç±»å‹
5. âœ“ è¿è¡Œç›¸åº”çš„æµ‹è¯•

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: åç«¯è¿æ¥è¢«æ‹’ç»

```
âœ— åç«¯æœåŠ¡æœªè¿è¡Œ
```

**è§£å†³ï¼š**
ç¡®ä¿åœ¨å¦ä¸€ä¸ª PowerShell çª—å£è¿è¡Œï¼š
```powershell
npm run dev
```

### é—®é¢˜ 2: RCON è¿æ¥å¤±è´¥

```
âœ— æµ‹è¯• RCON è¿æ¥
  é”™è¯¯: Connection refused
```

**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥ Minecraft æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
2. éªŒè¯ `server.properties` ä¸­ `enable-rcon=true`
3. æ£€æŸ¥ RCON å¯†ç æ˜¯å¦æ­£ç¡®
4. ç¡®è®¤ RCON ç«¯å£ (é»˜è®¤ 25575) æœªè¢«é˜²ç«å¢™é˜»æ­¢

```powershell
# æµ‹è¯• RCON è¿æ¥
netstat -ano | findstr :25575
```

### é—®é¢˜ 3: ä»ªè¡¨ç›˜æµ‹è¯•è¶…æ—¶

```
âœ— æµ‹è¯•è·å–å½“å‰çŠ¶æ€
  é”™è¯¯: 10ç§’å†…æœªæ”¶åˆ°å“åº”
```

**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥ Spark Mod æ˜¯å¦å·²å®‰è£…
2. éªŒè¯ Spark API URL æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ Spark æ˜¯å¦æ­£åœ¨è¿è¡Œ (é»˜è®¤ç«¯å£ 8080)

```powershell
# æµ‹è¯• Spark API
curl http://127.0.0.1:8080 -UseBasicParsing
```

### é—®é¢˜ 4: å‘½ä»¤å‘é€å¤±è´¥

```
âœ— æµ‹è¯•å‘½ä»¤å‘é€
  é”™è¯¯: timeout
```

**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥ RCON è¿æ¥æ˜¯å¦æˆåŠŸ
2. éªŒè¯ MC æœåŠ¡å™¨æ˜¯å¦å“åº”
3. æŸ¥çœ‹ MC æœåŠ¡å™¨æ§åˆ¶å°æ—¥å¿—

## å¤šæœåŠ¡å™¨æµ‹è¯•

å¦‚æœæƒ³æµ‹è¯•å¤šä¸ª Minecraft æœåŠ¡å™¨ï¼š

```powershell
# æ·»åŠ ç¬¬äºŒä¸ªæœåŠ¡å™¨é…ç½®
curl -X POST http://localhost:3001/api/configs `
  -H "Content-Type: application/json" `
  -d '{
    "name": "ç¬¬äºŒä¸ªæœåŠ¡å™¨",
    "host": "192.168.1.100",
    "port": 25575,
    "password": "password2",
    "timeout": 5000,
    "sparkApiUrl": "http://192.168.1.100:8080"
  }' -UseBasicParsing

# è¿è¡Œä»ªè¡¨ç›˜æµ‹è¯•ï¼Œä¼šæµ‹è¯•æ‰€æœ‰æœåŠ¡å™¨
npm run test:dashboard
```

## ç¯å¢ƒæ£€æŸ¥æ¸…å•

åœ¨è¿è¡Œæµ‹è¯•å‰ï¼Œæ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

- [ ] åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:3001
- [ ] Minecraft æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- [ ] RCON å·²å¯ç”¨åœ¨ server.properties ä¸­
- [ ] RCON å¯†ç ä¸é…ç½®ä¸€è‡´
- [ ] è‡³å°‘æ·»åŠ äº†ä¸€ä¸ªæœåŠ¡å™¨é…ç½®
- [ ] PowerShell èƒ½è®¿é—® npm å‘½ä»¤

## æ€§èƒ½æœŸæœ›

å®Œæ•´æµ‹è¯•å¥—ä»¶çš„è¿è¡Œæ—¶é—´ï¼š

| æ¡ä»¶ | è€—æ—¶ |
|------|------|
| ä»… WebSocket è¿æ¥ | 10-15s |
| RCON å“åº”è‰¯å¥½ | 20-30s |
| Spark æ•°æ®å“åº” | 30-50s |
| ç½‘ç»œå»¶è¿Ÿé«˜ | 50-100s |

## ä¸‹ä¸€æ­¥

âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡åï¼Œå¯ä»¥ï¼š

1. å¼€å§‹é›†æˆæµ‹è¯•åˆ° CI/CD æµç¨‹
2. æ€§èƒ½ä¼˜åŒ– (æ­¥éª¤ 57-59)
3. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
4. ç›‘æ§å’Œå‘Šè­¦è®¾ç½®

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹ [FUNCTIONAL_TESTING_GUIDE.md](FUNCTIONAL_TESTING_GUIDE.md) äº†è§£æ›´å¤šè¯¦æƒ…ã€‚
